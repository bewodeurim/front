<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="stylesheet"
            href="../../static/css/myPage/payment-method.css"
        />
        <title>결제 수단</title>
    </head>
    <body>
        <div class="contents">
            <div id="container">
                <!-- [S] 선불서비스 -->
                <section id="content" class="section-prepaid">
                    <div class="inner">
                        <div class="page-header side">
                            <h2 class="page-title">선불서비스</h2>
                            <div class="location">
                                <a href="/" class="home"
                                    ><span class="hidden">HOME</span></a
                                >
                                <strong> 선불서비스 </strong>
                            </div>
                        </div>
                        <div class="tab-wrap2"></div>
                    </div>
                    <section class="bg-banner-wrap">
                        <div class="inner2">
                            <div class="icon-box">
                                <i class="bg-icon01"></i>
                            </div>
                            <div class="title-wrap">
                                <h2 class="title-type2">선불 요금 충전 안내</h2>
                                <p class="desc">
                                    쉽고 편리한 실시간 요금 충전방법을
                                    알려드릴게요!
                                </p>
                            </div>
                        </div>
                    </section>
                    <section class="content-box">
                        <ul class="prepaid-list">
                            <!-- 온라인 즉시 결제 -->
                            <li class="box01">
                                <div class="title-box">
                                    <h3 class="title-type">온라인 즉시 결제</h3>
                                    <p>
                                        온라인 신용카드 및 간편결제로 바로
                                        충전합니다.
                                    </p>
                                    <a
                                        href="javascript:void(0)"
                                        class="btn-type10"
                                        onclick="goCheckPhone(1);return false;"
                                        >온라인 충전하기 &gt;</a
                                    >
                                </div>
                                <div class="flex-box">
                                    <!-- <ul>
                                        <li>
                                            <i class="ico-visa"></i>
                                            <strong>신용카드</strong>
                                        </li>
                                        <li>
                                            <i class="ico-kakaopay"></i>
                                            <strong>카카오페이</strong>
                                        </li>
                                        <li>
                                            <i class="ico-payco"></i>
                                            <strong>페이코</strong>
                                        </li>
                                        <li>
                                            <i class="ico-pay"></i>
                                            <strong>계좌이체</strong>
                                        </li>
                                        <li>
                                            <i class="ico-paypal"></i>
                                            <strong>PayPal</strong>
                                        </li>
                                        <li>
                                            <i class="ico-wechat-pay"></i>
                                            <strong>WechatPay</strong>
                                        </li>
                                    </ul> -->
                                </div>
                            </li>
                            <!-- 충전계좌 입금 -->
                            <li class="box02">
                                <div class="title-box">
                                    <h3 class="title-type">충전계좌 입금</h3>
                                    <p>
                                        휴대폰 번호 별로 지정된 전용(가상)계좌로
                                        입금하시면 바로 충전됩니다.
                                    </p>
                                </div>
                                <h4 class="sub-title">계좌확인방법</h4>
                                <div class="flex-box">
                                    <ul>
                                        <li>
                                            <i class="ico-mail"></i>

                                            <p>
                                                <strong class="after"
                                                    >080-730-0114<i
                                                        class="ico-call6"
                                                    ></i></strong
                                                ><a>문자 확인</a>
                                            </p>
                                        </li>
                                        <li>
                                            <i class="ico-pc"></i>

                                            <p>
                                                <strong class="after"
                                                    >마이페이지</strong
                                                >
                                                <!-- <a href="javascript:void(0)" class="underline" onclick="goCheckPhone(2);return false;">-->
                                                <a
                                                    href="javascript:void(0);"
                                                    class="underline"
                                                    onclick="goVirAccPage();"
                                                    >가상계좌충전확인</a
                                                >
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <!-- 자동충전 -->
                            <li class="box03">
                                <div class="title-box">
                                    <h3 class="title-type">자동 충전 설정</h3>
                                    <p>
                                        자동이체 신청한 계좌 또는 신용카드에서
                                        자동출금(결제) 후 즉시 충전됩니다.
                                    </p>
                                    <a
                                        href="javascript:void(0)"
                                        class="btn-type10"
                                        >자동충전 신청/해제하기</a
                                    >
                                </div>
                                <h4 class="sub-title">신청방법</h4>
                                <div class="flex-box">
                                    <ul>
                                        <li>
                                            <i class="ico-phone-call"></i>
                                            <strong
                                                >모바일앱, 홈페이지를 통해
                                                신청/해제</strong
                                            >
                                        </li>
                                        <li>
                                            <i class="ico-quick05"></i>
                                            <strong
                                                >가입매장 및 고객센터(폰114)로
                                                신청</strong
                                            >
                                        </li>
                                    </ul>
                                </div>
                            </li>

                            <li class="box06">
                                <div class="title-box">
                                    <h3 class="title-type">ARS</h3>
                                </div>
                                <div class="flex-box">
                                    <ul>
                                        <li>
                                            <i class="ico-data-call"></i>
                                            <p>
                                                <strong
                                                    >폰에서 114<i
                                                        class="ico-call6"
                                                    ></i
                                                ></strong>
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </section>
                </section>
                <!-- [E] 선불서비스 -->
            </div>

            <div
                class="pop-layer pop-prepaid"
                id="pop-prepaid"
                style="display: none"
            >
                <div class="dim"></div>
                <!-- 온라인 즉시 결제 모달 -->
                <div class="pop-wrap v2">
                    <!--  -->
                    <div class="pop-close-wrap">
                        <button class="pop-close">팝업닫기</button>
                    </div>
                    <div class="pop-content">
                        <h3 class="title-small t-l">
                            충전하실 휴대폰 번호를 확인해주세요.
                        </h3>
                        <div class="form-item ntit">
                            <input
                                value=""
                                class="input-delete"
                                type="text"
                                placeholder="휴대폰번호를 입력해주세요."
                                id="telNo"
                                onkeyup="this.value=this.value.replace(/[^0-9]/g,'');"
                            />
                        </div>
                        <div class="btn-wrap">
                            <a
                                href="javascript:void(0)"
                                class="btn-type"
                                id="btnGoCheck"
                                >확인</a
                            >
                        </div>
                    </div>
                </div>
            </div>

            <script type="text/javascript">
                $(document).ready(function () {});

                //휴대폰 번호 확인
                function goCheckPhone(menuNo) {
                    UI.layerPopUp({ selId: "#pop-prepaid" });
                    $(document).on("click", "#btnGoCheck", function (e) {
                        e.preventDefault();

                        const param = {
                            telNo: $("#telNo").val(),
                        };

                        ftCallAjaxGet(
                            API_DOMAIN + "/charge/v1/phone-check",
                            param,
                            (res) => {
                                console.log(res);
                                if (res.data.success) {
                                    if (menuNo == 1) {
                                        // 온라인 충전하기
                                        console.log(menuNo);
                                        location.href =
                                            "/charge/fee/online/amt";
                                    }
                                    if (menuNo == 2) {
                                        // 가상계좌충전확인
                                        console.log(menuNo);
                                        location.href =
                                            "/charge/fee/virAccInfo";
                                    }
                                    if (menuNo == 3) {
                                        // 자동충전 신청/해제하기
                                        console.log(menuNo);
                                        location.href = "/charge/fee/autoInfo";
                                    }
                                    if (menuNo == 4) {
                                        // 편의점 충전방법 확인
                                        console.log(menuNo);
                                        location.href =
                                            "/charge/fee/cvnStore/type";
                                    }
                                    if (menuNo == 5) {
                                        // 선불카드 충전
                                        console.log(menuNo);
                                        location.href = "/charge/fee/pinNum";
                                    }
                                }
                            }
                        );
                    });
                }

                //자동충전 계좌 페이지 이동 전 상태 체크
                const preAutoChargePage = function () {
                    //해당 유저 상태 체크
                    ftCallAjaxGet(
                        API_DOMAIN + "/charge/v1/userInfo",
                        null,
                        (res) => {
                            const data = res.data;
                            //대표회선이 선불 일때만 다음 step
                            if (data.svcType == "PP") {
                                goAutoChargePage(data.telNo);
                            } else {
                                ftAlert(
                                    "대표회선이 후불요금제를 이용 중이여서 자동충전 신청이 불가능합니다. ",
                                    () => {
                                        location.href =
                                            "/mypage/info/multi_line";
                                    }
                                );
                            }
                        },
                        (err) => {
                            ftAlert("로그인 후 이용 가능합니다.", () => {
                                location.href = "/login";
                            });
                        },
                        false,
                        false
                    );
                };

                //자동 충전 페이지 이동
                const goAutoChargePage = function (telNo) {
                    const param = {
                        telNo: telNo,
                    };
                    //휴대폰 검증 후 세션 저장
                    ftCallAjaxGet(
                        API_DOMAIN + "/charge/v1/phone-check",
                        param,
                        (res) => {
                            if (res.data?.success) {
                                //세션 저장된 객체를 기반으로 페이지 이동
                                ftCallAjaxGet(
                                    API_DOMAIN + "/charge/v1/user-phone",
                                    null,
                                    (res) => {
                                        const data = res.data;
                                        const type =
                                            data?.autoPayYn == "Y" ? "E" : "R";
                                        location.href =
                                            "/charge/fee/cert?type=" + type;
                                    },
                                    null,
                                    true,
                                    true
                                );
                            }
                        },
                        null,
                        true,
                        true
                    );
                };

                //가상계좌 충전 확인
                const goVirAccPage = function () {
                    //비로그인
                    if (isEmpty(MEM_AUTH) || "N" == MEM_AUTH) {
                        location.href =
                            "/login?redirectUrl=/prepaidPhone/chargeInfo/list";
                    } else if (MEM_LINE.substr(-1) == "D") {
                        ftAlert(
                            "대표회선이 후불요금제를 이용 중이여서 가상계좌충전확인이 불가능합니다."
                        );
                    } else {
                        location.href = "/charge/fee/virAccInfo";
                    }
                };
            </script>
        </div>
    </body>
    <script src="../../static/js/myPage/payment-method.js"></script>
</html>
